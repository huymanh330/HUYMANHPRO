<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AI Baccarat Predictor</title>
    <style>
        body { font-family: sans-serif; background: #1a1a1a; color: white; display: flex; flex-direction: column; align-items: center; padding: 20px; }
        .container { background: #2d2d2d; padding: 20px; border-radius: 10px; box-shadow: 0 0 15px rgba(0,0,0,0.5); width: 100%; max-width: 500px; }
        .input-group { margin-bottom: 15px; }
        label { display: block; margin-bottom: 5px; font-weight: bold; color: #ffcc00; }
        input { width: 95%; padding: 10px; border-radius: 5px; border: none; text-transform: uppercase; font-weight: bold; letter-spacing: 2px; }
        button { width: 100%; padding: 15px; background: #e74c3c; color: white; border: none; border-radius: 5px; cursor: pointer; font-size: 16px; font-weight: bold; }
        button:hover { background: #c0392b; }
        .results { margin-top: 20px; display: grid; grid-template-columns: 1fr 1fr; gap: 10px; }
        .res-box { background: #3d3d3d; padding: 15px; border-radius: 5px; text-align: center; border-left: 5px solid #ffcc00; }
        .res-box h4 { margin: 0 0 10px 0; font-size: 14px; color: #aaa; }
        .prediction { font-size: 24px; font-weight: bold; }
        .P { color: #3498db; } .B { color: #e74c3c; } .T { color: #2ecc71; }
    </style>
</head>
<body>

<div class="container">
    <h2 style="text-align: center;">AI Baccarat Pro</h2>
    <p style="font-size: 12px; color: #888; text-align: center;">Nhập 7 tay gần nhất (P/B/T)</p>
    
    <div class="input-group">
        <label>1. Cầu Chính (Main Road)</label>
        <input type="text" id="road1" maxlength="7" placeholder="VD: PPBBPPP">
    </div>
    <div class="input-group">
        <label>2. Cầu Rỗng (Big Eye Boy)</label>
        <input type="text" id="road2" maxlength="7" placeholder="VD: BBPPBBP">
    </div>
    <div class="input-group">
        <label>3. Cầu Đặc (Small Road)</label>
        <input type="text" id="road3" maxlength="7" placeholder="VD: PPPBBBT">
    </div>
    <div class="input-group">
        <label>4. Cầu Mưa (Cockroach Pig)</label>
        <input type="text" id="road4" maxlength="7" placeholder="VD: TBBPPBB">
    </div>

    <button onclick="predict()">XÁC NHẬN DỰ ĐOÁN</button>

    <div class="results" id="resultsArea" style="display: none;">
        <div class="res-box"><h4>Cầu Chính</h4><div id="out1" class="prediction">?</div></div>
        <div class="res-box"><h4>Cầu Rỗng</h4><div id="out2" class="prediction">?</div></div>
        <div class="res-box"><h4>Cầu Đặc</h4><div id="out3" class="prediction">?</div></div>
        <div class="res-box"><h4>Cầu Mưa</h4><div id="out4" class="prediction">?</div></div>
    </div>
</div>

<script>
const history = "PPBBPPPBPPPTBPBBBPTBBBBBBPPBPBPBTTBBBBPTPTPTPBBTPPPBPBBBBPBTBBBPPB / PBBPPTBPPTPPPPPPBBBBBPBBPPPTBBBBBTBBBBPTPPBBBPBBPPPPBPBBPPPPBBPPPPB / BPPPBPTPPPPTTBBTBBPBBTPBBBBPPPTPBBPPBTPPPPBBBBPTPBBBBTPPPBBTBTPB / BTPPBPPTPPBPBPPBBTBBTBBBBBBTPBPPBBPTBBPPPPBBPPBBBPBBBBBBPPTBBPBBPP / PPPPPPBBPPBBTBBBPBTBPPBBTPPBTBBPBPBBPPPBBBPBPPBBBPBBBPPBBPTBBBBBTBPBBPB / BPPPBBBBBPBBBTTPBBPBPBBBPPBPBBBBPTPBBPBBTPBPBPPBPPBBPTBPPTPPPPBBBPPBP / PBTBBBPBPBPBBTBTBBBPBBPTBPPBPPBPPPBBPPBTPBPPTBBBBPBBPBBBPBPPBPPPB / BBPPPBTPPBPPBPPBBPPBBPBPBPPBPTBBBBPPPBPPTPBBBPPTBPPBBBBBBPPPPPBTB / PPPTBBTPBPPTPPBPBBPBBBBPTPPBBBPBBPBBPPPPBPBBBPBPBBTBPPPPPPBBPPTBPBP / PBBPBBPTBBBBBBBPTPBPPBPPPTPPBBPTBPTPBTPBTBBPBTTBBPBTTPPBPBPBBBPPPB / PBBPBTPBPBTPPPBPPPPPPTPBPBPBPBTPPPBPBPPPBBPTBPBPPBPPPBBPPPBPPBBPPT";

function getPrediction(input) {
    if (input.length < 3) return "?";
    
    // 1. Tìm kiếm chính xác chuỗi trong lịch sử
    let index = history.indexOf(input);
    if (index !== -1 && index + input.length < history.length) {
        let nextChar = history[index + input.length];
        if (nextChar !== " " && nextChar !== "/") return nextChar;
    }

    // 2. AI Logic (Xác suất N-gram) nếu không tìm thấy chuỗi khớp
    let counts = { 'P': 0, 'B': 0, 'T': 0 };
    let sub = input.slice(-3); // Lấy 3 tay cuối để soi xác suất
    let pos = history.indexOf(sub);
    while (pos !== -1) {
        let next = history[pos + sub.length];
        if (counts.hasOwnProperty(next)) counts[next]++;
        pos = history.indexOf(sub, pos + 1);
    }
    
    let prediction = Object.keys(counts).reduce((a, b) => counts[a] > counts[b] ? a : b);
    return counts[prediction] > 0 ? prediction : (Math.random() > 0.5 ? "P" : "B");
}

function predict() {
    const roads = [
        document.getElementById('road1').value.toUpperCase(),
        document.getElementById('road2').value.toUpperCase(),
        document.getElementById('road3').value.toUpperCase(),
        document.getElementById('road4').value.toUpperCase()
    ];

    roads.forEach((val, i) => {
        let res = getPrediction(val);
        let el = document.getElementById('out' + (i + 1));
        el.innerText = res === "P" ? "PLAYER" : (res === "B" ? "BANKER" : (res === "T" ? "TIE" : "?"));
        el.className = "prediction " + res;
    });

    document.getElementById('resultsArea').style.display = 'grid';
}
</script>
</body>
</html>
